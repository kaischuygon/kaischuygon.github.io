---
import { getCollection, CollectionEntry } from 'astro:content';

// Layout import â€” provides basic page elements: <head>, <nav>, <footer> etc.
import Layout from '../layouts/Layout.astro';

// Component Imports
import Grid from '../components/Grid.astro';
import Hero from '../components/Hero.astro';
import Icon from 'astro-icon';
import Pill from '../components/Pill.astro';
import GridItem from '../components/GridItem.astro';

// Page section components
import Workpreview from '../components/WorkPreview.astro';

// Content Fetching: List four most recent work projects
const gridItems = (await getCollection('grid'))
// const projects = (await getCollection('work'))
// 	.sort((a:any, b:any) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
// 	.slice(0, 4); // only show the four most recent projects
---

<Layout>
	<header class="header-grid">
		<div id="hero">
			<Hero
				title="Hello, I'm Kai."
				tagline="I am a software engineer based in Boulder, CO."
				class:list={'md:col-span-2'}
			/>
			<div class="flex gap-4 my-4">
				<Pill><Icon name="bx:bx-code" class="h-6" />Developer</Pill>
				<Pill><Icon name="bx:bxs-pencil" class="h-6" />Designer</Pill>
			</div>
		</div>
		<div class="bg-slate-200 dark:bg-slate-900 shadow-outline dark:shadow-outline-dark" id="portrait">
			<img
				class="aspect-square object-contain h-full mx-auto"
				alt="A profile of Kai"
				src="/assets/portrait.png"
			/>
		</div>
		{
			gridItems.map((item) => (
				<GridItem
					item={item}
					path={item.slug}
				/>
			))
		}
	</header>
</Layout>

<style>
	.header-grid {
		@apply grid gap-4 grid-cols-1 grid-rows-1 md:grid-cols-3;
	}

	#hero {
		@apply col-span-1 md:col-span-2;
	}

	#portrait {
		@apply col-span-1 row-span-1 hidden md:block md:col-start-3 md:row-span-2;
	}
</style>
