---
import Layout from '../layouts/Layout.astro';
import Pill from '../components/Pill.astro'
import {Icon} from 'astro-icon/components'
---

<Layout>
	<div class="flex flex-col gap-4 mx-auto w-full md:w-[750px] h-full justify-center">
		<div class="font-code text-primary-500">ğŸ‘‹ğŸ½ Hello! I'm </div>
		<div class="font-code font-semibold text-accent text-5xl md:text-6xl lg:text-7xl xl:text-8xl">
			<span id="typing" class="break-word">Kai Schuyler Gonzalez</span>
			<span id="cursor" class="absolute">_</span>
		</div>
		<div class="font-code text-primary-500">a software engineer ğŸ’» and designer âœï¸ based in Boulder, Colorado ğŸ¦¬ ğŸ”ï¸.</div>
		<div class="flex justify-end">
			<a href="/about" class="flex justify-end p-4">
				<Pill hover={true}>about me <Icon name="bx:right-arrow-alt" /></Pill>
			</a>
			<a href="/work" class="flex justify-end p-4">
				<Pill hover={true}>my work <Icon name="bx:right-arrow-alt" /></Pill>
			</a>
		</div>
	</div>
</Layout>

<script is:inline>
	// ensure only on index page
	document.addEventListener('astro:page-load', () => {
		var typingDiv = document.getElementById('typing');
		var cursor = document.getElementById('cursor');
		if (typingDiv && cursor) {
			var text = typingDiv.textContent || '';
			var i = 0;
			let typingSpeed = 100; 
			let blinkCount = 0;
			
			function type() {
				if(i <= text.length) {
					typingDiv.textContent = text.slice(0, i++);
				}
				setTimeout(type, typingSpeed);
			}
	
			function blinkCursor() { // blink 5 times
				if(blinkCount > 10) return;
				cursor.classList.toggle('opacity-0');
				setTimeout(blinkCursor, 500);
				blinkCount++;
			}
		
			type();
			
			// wait for typing to finish before blinking cursor
			setTimeout(blinkCursor, text.length * typingSpeed);
		}
	});
</script>
